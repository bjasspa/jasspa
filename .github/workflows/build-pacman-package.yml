name: Build Pacman package (Windows-2019)

on:
  workflow_dispatch:
    branches: [ master ]
env:
   VERSION: "20240902"

jobs:
  msys2-ucrt64:
    runs-on: windows-latest
    name: Build on ${{ matrix.distro }} ${{ matrix.arch }}
    defaults:
        run:
            shell: msys2 {0}
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
       
      - name: Msys setup
        uses: msys2/setup-msys2@v2
        with: 
          msystem: UCRT64
          update: true
          install: git unzip

      - name: Initial file checking
        shell: msys2 {0}
        run: |
            ls
            pwd
            cd microemacs/packages/msys2
            ls
            which bash
            bash tpl2pkg.sh 20240902 PKGBUILD.tpl
            ls microemacs-package
            cd microemacs-package
            ls -lr
            makepkg -f
            makepkg -si
            mecs -V
