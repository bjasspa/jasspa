name: Build Pacman package (Windows-2019)

on:
  workflow_dispatch:
    branches: [ master ]
env:
   VERSION: "20240902"

jobs:
  build:
    runs-on: windows-2019
    name: Build on ${{ matrix.distro }} ${{ matrix.arch }}

    steps:
      - name: Checkout code
        uses: actions/checkout@v4
       
      - name: Msys setup
        uses: msys2/setup-msys2@v2
        
      - name: Installs 
        run:
            pacman -Ss unzip
        run: |
      - name: Initial file checking
        run: |
            ls
            pwd
            cd microemacs/packages/msys2
            ls
            which bash
            bash tpl2pkg.sh 20240902 PKGBUILD.tpl
            ls microemacs-package
            cd microemacs-package
            ls
            makepkg -f
            makepkg -si
            mec -V
        shell: msys2 {0}
