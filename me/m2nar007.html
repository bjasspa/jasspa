<HTML>
<HEAD><TITLE>Build(2)</TITLE></HEAD>
<!-- nr2html - Version 1.0.1k - [Nroff Parser : 1.3.4a (SunOS)] - Feb  7 2004 - Jon Green (1995-2004) -->
<BODY>
<H1><A HREF="../me.html"><IMG SRC="../me/logo/logo.png" BORDER=0 ALIGN=BOTTOM ALT="[me]"></A>
Build(2)</H1>
<FONT SIZE=2>
<A HREF="../me.html">[Home]</A>
<A HREF="amicr031.html">[Commands]</A>
<A HREF="amicr033.html">[Variables]</A>
<A HREF="amicr034.html">[Macro-Dev]</A>
<A HREF="amicr035.html">[Glossary]</A>
</FONT>
<HR>
<H2><B>BUILD </B></H2>
<UL><P>MicroEmacs '04 may be compiled from the source files using the command shell build scripts <I>build</I> (UNIX Bourne Shell) or <I>build.bat</I> (DOS/Windows). A default compile sequence may be achieved with a simple: <UL>
<PRE>build 
</PRE></UL>
<P>from the command line. The build script attempts to detect the host system and available compiler and build the editor. 
<P>The build script recognizes the following options:- 
<P><B>-C</B> 
<BR><UL>Build clean. Delete all of the object files. </UL>
<P><B>-d</B> 
<BR><UL>Build a debugging version, the output is <TT>med</TT> (or <TT>med32</TT> for 32-bit Windows versions). </UL>
<P><B>-h</B> 
<BR><UL>Display a simple help page </UL>
<P><B>-l</B> <I>logfile</I> 
<BR><UL>Redirect all compilation output to the <I>logfile</I>, this may not work on DOS or Windows systems. </UL>
<P><B>-la</B> <I>logfile</I> 
<BR><UL>Append all compilation output to the end of <I>logfile</I>, this may not work on DOS or Windows systems. </UL>
<P><B>-m</B> <I>makefile</I> 
<BR><UL>Build using the specified makefile. over-riding the auto system detect. The supplied makefiles include:- <UL><UL><P>
<LI><TT>aix43.mak</TT> IBM AIX 4.3 native. 
<LI><TT>aix43.gmk</TT> IBM AIX 4.3 using GNU tools. 
<LI><TT>cygwin.gmk</TT> Cygwin using GNU tools under Windows. 
<LI><TT>dosdj1.mak</TT> Microsoft DOS build using djgpp version 1. 
<LI><TT>dosdj2.mak</TT> Microsoft DOS build using djgpp version 2. 
<LI><TT>freebsd.gmk</TT> Free BSD using GNU tools. 
<LI><TT>hpux9.gmk</TT> HP-UX 9.x using GNU tools. 
<LI><TT>hpux9.mak</TT> HP-UX 9.x native 
<LI><TT>hpux10.gmk</TT> HP-UX 10.x using GNU tools. 
<LI><TT>hpux10.mak</TT> HP-UX 10.x native 
<LI><TT>hpux11.gmk</TT> HP-UX 11.x using GNU tools. 
<LI><TT>hpux11.mak</TT> HP-UX 11.x native 
<LI><TT>irix5.gmk</TT> Silicon Graphics IRIX 5.x using GNU tools 
<LI><TT>irix5.mak</TT> Silicon Graphics IRIX 5.x native 
<LI><TT>irix6.gmk</TT> Silicon Graphics IRIX 6.x using GNU tools 
<LI><TT>irix6.mak</TT> Silicon Graphics IRIX 6.x native 
<LI><TT>linux2.gmk</TT> Linux 2.x using GNU tools 
<LI><TT>openbsd.gmk</TT> OpenBSD using GNU tools. 
<LI><TT>openstep.mak</TT> Openstep 4.2 on NeXTstep (BSD 4.3). 
<LI><TT>sunos55.gmak</TT> Sun Solaris 5.5 using GNU tools 
<LI><TT>sunos55.mak</TT> Sun Solaris 5.5 native 
<LI><TT>sunos56.gmak</TT> Sun Solaris 5.6 using GNU tools 
<LI><TT>sunos56.mak</TT> Sun Solaris 5.6 native 
<LI><TT>sunosx86.gmk</TT> Sun Solarais 2.6 (Intel) using GNU tools. 
<LI><TT>win32bc.mak</TT> Borland C, 32-bit Windows version. 
<LI><TT>win32b55.mak</TT> Borland C 5.5, 32-bit Windows version (Free compiler). 
<LI><TT>win32sv2.mak</TT> Microsoft Developer v2.x, Win32s (for Win 3.xx) 
<LI><TT>win32sv4.mak</TT> Microsoft Developer v4.2, Win32s (for Win 3.xx) 
<LI><TT>win32v2.mak</TT> Microsoft Developer v2.x, 32-bit Windows. 
<LI><TT>win32v5.mak</TT> Microsoft Developer v5.x, 32-bit Windows. 
<LI><TT>win32v6.mak</TT> Microsoft Developer v6.x, 32-bit Windows. </UL></UL></UL>
<P><B>-ne</B> 
<BR><UL>Build NanoEmacs (a cut down version aimed as a vi replacement), the output is <TT>ne</TT> (or <TT>ned32</TT> for 32-bit Windows versions). </UL>
<P><B>-S</B> 
<BR><UL>Build spotless. Deletes all of the object files and any backup files, tag files etc. </UL>
<P><B>-t</B> <I>type</I> 
<BR><UL>Set the build type, where <I>type</I> can be one of the following: <UL><UL><P>
<LI><TT>c</TT> Build a console only version (i.e. no window support), the output is <TT>mec</TT> (or <TT>mec32</TT> on Windows). 
<LI><TT>w</TT> Build a windows only version (i.e. no console support), the output is <TT>mew</TT> (or <TT>mew32</TT> on Windows). 
<LI><TT>cw</TT> Build a version which supports both console and windows, the output is <TT>mecw</TT> (or <TT>mecw32</TT> on Windows). </UL></UL></UL>
<P><B>-u</B> 
<BR><UL>Build a URL version (Windows '95/'98/NT only), constructs the executable <TT>meu32.exe</TT>. </UL></UL>
<H2>Makefiles </H2>
<UL><P>The supplied makefiles are provided in two forms:- <UL><P>
<LI><B>.gmk</B> - GNU make, using gcc. 
<LI><B>.mak</B> - Native make, consistent with the compiler and platform. </UL><P>The makefiles are supplied with the following targets:- <UL><P>
<LI><B>all</B> - Default build. 
<LI><B>clean</B> - Removes intermediate files. 
<LI><B>spotless</B> - Removes intermediate files and any backup files. 
<LI><B>med</B> - Builds a debugging version. 
<LI><B>men</B> - Builds console version (Windows only). 
<LI><B>men</B> - Builds a URL version (Windows only). 
<LI><B>menu</B> - Builds console and URL version (Windows only). </UL></UL>
<H2><B>WINDOWS ENVIRONMENT </B></H2>
<UL><P>The Windows environment is a little more difficult than UNIX because it does not have a good native command line environment. There are two Microsoft Developer options for building. If you have not purchased MS-DEV then use the FREE Borland compiler which runs on the command line. </UL>
<H2>MS-Dev GUI Build </H2>
<UL><P>MicroEmacs is supplied with a MS-Dev 6.x project for building. This has only been set up for debugging and has limited build options, it will also produce a large executable image. The MS-Windows images shipped by JASSPA are built using the command line build environment which is detailed in a later section. </UL>
<H2>MS-Dev Command Line Build </H2>
<UL><P>The command line build with MS-Dev is a little messy to set up, in the following sections we discuss MS-Dev 6.x under Windows 2000. There will be differences with different operating systems versions, different install paths and different versions of the MS-Dev toolkit. Use the following information as an outline ONLY, JASSPA will not take responsibility for the configuration of the command line environment, if in doubt then use the GUI builder. 
<P>To run <B>nmake(1)</B> from a DOS box then the MS-Dev compiler tools must be available in the command path. The MS-Dev kit V6.x is supplied with the necessary file to set up the path which is called <TT>VCVARS32.BAT</TT> and is typically located in directory: <UL>
<PRE>C:\Program&nbsp;Files\Microsoft&nbsp;Visual&nbsp;Studio\VC98\Bin 
</PRE></UL>
<P>This should be run first and then the command line make files may be run using nmake i.e. to build ME:- <UL>
<PRE>nmake&nbsp;-f&nbsp;win32v6.mak&nbsp;me 
</PRE></UL>
<P>To build NE:- <UL>
<PRE>nmake&nbsp;-f&nbsp;win32v6.mak&nbsp;ne 
</PRE></UL>
<P>To clean up after:- <UL>
<PRE>nmake&nbsp;-f&nbsp;spotless 
</PRE></UL>
<P>If you are going to perform a lot of command line building then it is easier to set up the environment and not have to run <TT>VCVARS32.BAT</TT> every time you compile. 
<P>You can add the variables to your environment, you will need to expand the <TT>VCVARS32.BAT</TT> script and then add the results. The following example is for MS-Dev 6.0 under W2K, the settings will differ depending on what O/S variant you are running and where you have installed software. The following ONLY serves as an example, you need to tailor for your installation. <UL><P>
<LI>To set up the variables then <B>Start</B> -&gt; <B>Settings</B> -&gt; <B>Control</B> <B>Panel</B> which displays the Control Panel items. 
<LI>Select <B>System</B> -&gt; <B>Advanced</B> -&gt; <B>Environment variables</B> 
<LI>In <B>User Variables for</B> <I>&lt;User&gt;</I> then <B>New...</B> or <B>Edit...</B> the <TT>PATH</TT> variable. Add the command line tools execution paths to the environment variable, this will be something like the following (but without newlines):- <UL><UL>
<PRE>Variable&nbsp;Name:&nbsp;&nbsp;PATH 
Variable&nbsp;Value:&nbsp;%PATH%; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C:\PROGRA~1\MICROS~3\Common\msdev98\BIN; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C:\PROGRA~1\MICROS~3\VC98\BIN; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C:\PROGRA~1\MICROS~3\Common\TOOLS\WINNT; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C:\PROGRA~1\MICROS~3\Common\TOOLS; 
</PRE></UL>

<LI></UL><P>Similarly add the <TT>INCLUDE</TT> variable:- <UL><UL>
<PRE>Variable&nbsp;Name:&nbsp;&nbsp;INCLUDE 
Variable&nbsp;Value:&nbsp;C:\PROGRA~1\MICROS~3\VC98\ATL\INCLUDE; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C:\PROGRA~1\MICROS~3\VC98\INCLUDE; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C:\PROGRA~1\MICROS~3\VC98\MFC\INCLUDE; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%INCLUDE% 
</PRE></UL>

<LI></UL><P>Similarly add the <TT>LIB</TT> variable:- <UL><UL>
<PRE>Variable&nbsp;Name:&nbsp;&nbsp;LIB 
Variable&nbsp;Value:&nbsp;C:\PROGRA~1\MICROS~3\VC98\LIB; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C:\PROGRA~1\MICROS~3\VC98\MFC\LIB; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%LIB% 
</PRE></UL>

<LI></UL><P>Accept the entries and close down the dialog. Start a new DOS command line and the variables should be set up ready for the build. </UL></UL>
<H2><B>NOTES </B></H2>
<UL><P>Other UNIX ports should be fairly easy from the base set of ported platforms. If any new platform ports are performed by individuals then please submit the makefiles and any source changes back to JASSPA - see 
<A HREF="amicr038.html">Contact Information</A>. </UL>
<HR>
<P><I>(c) Copyright JASSPA 2004</I>
<BR><I>Last Modified: 2004/01/18</I>
<BR><I>Generated On: 2004/03/26</I>
</BODY></HMTL>
