; -!- emf -!-
; This is part of the JASSPA MicroEmacs macro files
; Copyright (C) 1999-2009 JASSPA (www.jasspa.com)
; See the file me.emf for copying and conditions.
;
; Created:     Tue Feb 16 1999
; Synopsis:    Set up the chatacter translations for the different char sets.
; Authors:     Steven Phillips
;
; Notes:       The internal default is ISO-8859 (1-...).
;               All spelling dictionaries (to date anyway) are encoded 
;               with this character format and rules are required to 
;               translate characters into and out of this set.
;
; Define the list  of supported charsets and if windows then the font type
set-variable .change-font.cs-id  "|cp1252|iso8859-1|cp1250|iso8859-2|cp1251|iso8859-5|cp866|koi8-f|cp1253|iso8859-7|cp1254|iso8859-9|iso8859-15|cp850|cp437|plain-text|"
set-variable .change-font.cs-type  "1122555577991111"
set-variable .change-font.cs-wftp  "|0||238||204||||161||162||||255||"
!if &les @# 1
  ; if executed with an argument of 0 or less, define the charset names and return
  set-variable .change-font.cs-name  "|Western Europe - Win CP1252|Western Europe - ISO-8859-1|Central Europe - Win CP1250|Central Europe - ISO-8859-2|Cyrillic - Windows CP1251|Cyrillic - ISO-8859-5|Cyrillic - DOS CP866|Cyrillic - KOI8-F|Greek - Windows CP1253|Greek - ISO-8859-7|Turkish - Windows CP1254|Turkish - ISO-8859-9|Western Europe - ISO-8859-15|Western Europe - Win Console CP850|US PC - DOS CP437|Plain Text|"
  !return
!endif
; get the users display char set
set-variable #l0 &reg &spr "/history/%s/char-set" %platform "iso8859-1"
set-variable #l1 1
!if &seq #l0 "cp1252"
  set-char-mask "M" ""
  set-char-mask "dp" "\x80\x82\x83\x84\x85\x86\x87\x88\x89\x8A\x8B\x8C\x8E\x91\x92\x93\x94\x95\x96\x97\x98\x99\x9A\x9B\x9C\x9E\x9F"
  set-char-mask "c" "20AC0081201A0192201E20262020202102C62030016020390152008D017D008F009020182019201C201D20222013201402DC21220161203A0153009D017E017800A000A100A200A300A400A500A600A700A800A900AA00AB00AC00AD00AE00AF00B000B100B200B300B400B500B600B700B800B900BA00BB00BC00BD00BE00BF00C000C100C200C300C400C500C600C700C800C900CA00CB00CC00CD00CE00CF00D000D100D200D300D400D500D600D700D800D900DA00DB00DC00DD00DE00DF00E000E100E200E300E400E500E600E700E800E900EA00EB00EC00ED00EE00EF00F000F100F200F300F400F500F600F700F800F900FA00FB00FC00FD00FE00FF"
!elif &seq #l0 "iso8859-1"
  set-char-mask "M" ""
  set-char-mask "c" "0080008100820083008400850086008700880089008A008B008C008D008E008F0090009100920093009400950096009700980099009A009B009C009D009E009F00A000A100A200A300A400A500A600A700A800A900AA00AB00AC00AD00AE00AF00B000B100B200B300B400B500B600B700B800B900BA00BB00BC00BD00BE00BF00C000C100C200C300C400C500C600C700C800C900CA00CB00CC00CD00CE00CF00D000D100D200D300D400D500D600D700D800D900DA00DB00DC00DD00DE00DF00E000E100E200E300E400E500E600E700E800E900EA00EB00EC00ED00EE00EF00F000F100F200F300F400F500F600F700F800F900FA00FB00FC00FD00FE00FF"
!elif &seq #l0 "iso8859-15"
  set-char-mask "M" "\x80\xa4\x8a\xa6\x9a\xa8\x8e\xb4\x9e\xb8\x8c\xbc\x9c\xbd\x9f\xbe"
  set-char-mask "c" "0080008100820083008400850086008700880089008A008B008C008D008E008F0090009100920093009400950096009700980099009A009B009C009D009E009F00A000A100A200A320ac00A5016000A7016100A900AA00AB00AC00AD00AE00AF00B000B100B200B3017d00B500B600B7017e00B900BA00BB01520153017800BF00C000C100C200C300C400C500C600C700C800C900CA00CB00CC00CD00CE00CF00D000D100D200D300D400D500D600D700D800D900DA00DB00DC00DD00DE00DF00E000E100E200E300E400E500E600E700E800E900EA00EB00EC00ED00EE00EF00F000F100F200F300F400F500F600F700F800F900FA00FB00FC00FD00FE00FF"
!elif &seq #l0 "cp850"
  set-char-mask "M" "£ú™¶´Æ¨™Æ©∞ß±Ò≤˝≥¸¥ÓµÊ∂ı∑˙∏˝π˚ªØº¨Ω´æÛø®¿∑¡ê¬ä√≤ƒé∆í«Ä»‘…ê “À—ÃﬁÕ÷Œ◊œÿ–——•“„”‡‘‚’Â÷ô◊ûÿùŸÎ⁄È€Í‹ö›ÏﬁÁﬂˇ‡Ö·†‚É‰ÑÂÜÊëÁáËäÈÇÍàÎâÏçÌ°ÓåÔãÒ§ÚïÛ¢Ùìı‰ˆî˜ˆ¯õ˘ó˙£˚ñ¸Å˝Ï˛Ëˇò"
  set-char-mask "c" "00C700FC00E900E200E400E000E500E700EA00EB00E800EF00EE00EC00C400C500C900E600C600F400F600F200FB00F900FF00D600DC00F800A300D800D7019200E100ED00F300FA00F100D100AA00BA00BF00AE00AC00BD00BC00A100AB00BB2591259225932502252400C100C200C000A9256325512557255D00A200A5251025142534252C251C2500253C00E300C3255A25542569256625602550256C00A400F000D000CA00CB00C8013100CD00CE00CF2518250C2588258400A600CC258000D300DF00D400D200F500D500B500FE00DE00DA00DB00D900FD00DD00AF00B400AD00B1201700BE00B600A700F700B800B000A800B700B900B300B225A000A0"
  set-char-mask "dp" "\CA\CB\CC\CD\CE\CF\CG\CP\CQ\CZ\C[\C^\C_"
  set-variable $box-chars "≥⁄ø¿Ÿ¬√≈¥¡ƒ"
  set-variable $window-chars "=-#*%=\C^± ±\C_\CD==\C^\C^±±  ±±\C_\C_\C[\CZ|\CQ± ±\CP\CD||\CQ\CQ±±  ±±\CP\CP\C[\CZ x* \CP \CQ\x1a\x14\xfa$$\\"
  set-variable $system &band $system &bnot 0x10000
  set-variable #l1 0
!elif &seq #l0 "cp1250"
  set-char-mask "M" ""
  set-char-mask "c" "20AC0081201A0083201E2026202020210088203001602039015A0164017D0179009020182019201C201D202220132014009821220161203A015B0165017E017A00A002C702D8014100A4010400A600A700A800A9015E00AB00AC00AD00AE017B00B000B102DB014200B400B500B600B700B80105015F00BB013D02DD013E017C015400C100C2010200C40139010600C7010C00C9011800CB011A00CD00CE010E01100143014700D300D4015000D600D70158016E00DA017000DC00DD016200DF015500E100E2010300E4013A010700E7010D00E9011900EB011B00ED00EE010F01110144014800F300F4015100F600F70159016F00FA017100FC00FD016302D9"
!elif &seq #l0 "iso8859-2"
  set-char-mask "M" "\xA5\xA1\xBC\xA5\x8C\xA6\x8A\xA9\x8D\xAB\x8F\xAC\x8E\xAE\xB9\xB1\xBE\xB5\x9C\xB6\xA1\xB7\x9A\xB9\x9D\xBB\x9F\xBC\x9E\xBE"
  set-char-mask "c" "0080008100820083008400850086008700880089008A008B008C008D008E008F0090009100920093009400950096009700980099009A009B009C009D009E009F00A0010402D8014100A4013D015A00A700A80160015E0164017900AD017D017B00B0010502DB014200B4013E015B02C700B80161015F0165017A02DD017E017C015400C100C2010200C40139010600C7010C00C9011800CB011A00CD00CE010E01100143014700D300D4015000D600D70158016E00DA017000DC00DD016200DF015500E100E2010300E4013A010700E7010D00E9011900EB011B00ED00EE010F01110144014800F300F4015100F600F70159016F00FA017100FC00FD016302D9"
!elif &seq #l0 "cp1251"
  set-char-mask "M" ""
  set-char-mask "c" "04020403201A0453201E20262020202120AC203004092039040A040C040B040F045220182019201C201D202220132014009821220459203A045A045C045B045F00A0040E045E040800A4049000A600A7040100A9040400AB00AC00AD00AE040700B000B104060456049100B500B600B704512116045400BB04580405045504570410041104120413041404150416041704180419041A041B041C041D041E041F0420042104220423042404250426042704280429042A042B042C042D042E042F0430043104320433043404350436043704380439043A043B043C043D043E043F0440044104420443044404450446044704480449044A044B044C044D044E044F"
!elif &seq #l0 "iso8859-5"
  set-char-mask "M" "\x80\xA2\x81\xA3\x83\xF3\x8A\xA9\x8C\xAA\x8D\xAC\x8E\xAB\x8F\xAF\x90\xF2\x9A\xF9\x9C\xFA\x9D\xFC\x9E\xFB\x9F\xFF\xA1\xAE\xA2\xFE\xA3\xA8\xA5\xB3\xA7\xFD\xA8\xA1\xAA\xA4\xAD\xAD\xAF\xA7\xB2\xA6\xB3\xF6\xB4\xD3\xB8\xF1\xB9\xF0\xBA\xF4\xBC\xF8\xBD\xA5\xBE\xF5\xBF\xF7\xC0\xB0\xC1\xB1\xC2\xB2\xC3\xB3\xC4\xB4\xC5\xB5\xC6\xB6\xC7\xB7\xC8\xB8\xC9\xB9\xCA\xBA\xCB\xBB\xCC\xBC\xCD\xBD\xCE\xBE\xCF\xBF\xD0\xC0\xD1\xC1\xD2\xC2\xD3\xC3\xD4\xC4\xD5\xC5\xD6\xC6\xD7\xC7\xD8\xC8\xD9\xC9\xDA\xCA\xDB\xCB\xDC\xCC\xDD\xCD\xDE\xCE\xDF\xCF\xE0\xD0\xE1\xD1\xE2\xD2\xE3\xD3\xE4\xD4\xE5\xD5\xE6\xD6\xE7\xD7\xE8\xD8\xE9\xD9\xEA\xDA\xEB\xDB\xEC\xDC\xED\xDD\xEE\xDE\xEF\xDF\xF0\xE0\xF1\xE1\xF2\xE2\xF3\xE3\xF4\xE4\xF5\xE5\xF6\xE6\xF7\xE7\xF8\xE8\xF9\xE9\xFA\xEA\xFB\xEB\xFC\xEC\xFD\xED\xFE\xEE\xFF\xEF"
  set-char-mask "c" "0080008100820083008400850086008700880089008A008B008C008D008E008F0090009100920093009400950096009700980099009A009B009C009D009E009F00A0040104020403040404050406040704080409040A040B040C00AD040E040F0410041104120413041404150416041704180419041A041B041C041D041E041F0420042104220423042404250426042704280429042A042B042C042D042E042F0430043104320433043404350436043704380439043A043B043C043D043E043F0440044104420443044404450446044704480449044A044B044C044D044E044F2116045104520453045404550456045704580459045A045B045C00A7045E045F"
!elif &seq #l0 "cp866"
  set-char-mask "M" "\xA0\xFF\xA1\xF6\xA2\xF7\xA4\xFD\xA8\xF0\xAA\xF2\xAF\xF4\xB0\xF8\xB7\xFA\xB8\xF1\xB9\xFC\xBA\xF3\xBF\xF5\xC0\x80\xC1\x81\xC2\x82\xC3\x83\xC4\x84\xC5\x85\xC6\x86\xC7\x87\xC8\x88\xC9\x89\xCA\x8A\xCB\x8B\xCC\x8C\xCD\x8D\xCE\x8E\xCF\x8F\xD0\x90\xD1\x91\xD2\x92\xD3\x93\xD4\x94\xD5\x95\xD6\x96\xD7\x97\xD8\x98\xD9\x99\xDA\x9A\xDB\x9B\xDC\x9C\xDD\x9D\xDE\x9E\xDF\x9F\xE0\xA0\xE1\xA1\xE2\xA2\xE3\xA3\xE4\xA4\xE5\xA5\xE6\xA6\xE7\xA7\xE8\xA8\xE9\xA9\xEA\xAA\xEB\xAB\xEC\xAC\xED\xAD\xEE\xAE\xEF\xAF\xF0\xE0\xF1\xE1\xF2\xE2\xF3\xE3\xF4\xE4\xF5\xE5\xF6\xE6\xF7\xE7\xF8\xE8\xF9\xE9\xFA\xEA\xFB\xEB\xFC\xEC\xFD\xED\xFE\xEE\xFF\xEF"
  set-char-mask "c" "0410041104120413041404150416041704180419041A041B041C041D041E041F0420042104220423042404250426042704280429042A042B042C042D042E042F0430043104320433043404350436043704380439043A043B043C043D043E043F259125922593250225242561256225562555256325512557255D255C255B251025142534252C251C2500253C255E255F255A25542569256625602550256C25672568256425652559255825522553256B256A2518250C25882584258C259025800440044104420443044404450446044704480449044A044B044C044D044E044F040104510404045404070457040E045E00B0221900B7221A211600A425A000A0"
!elif &seq #l0 "koi8-f"
  set-char-mask "M" "\x80\xB1\x81\xB2\x83\xA2\x8A\xB9\x8C\xBA\x8D\xBC\x8E\xBB\x8F\xBF\x90\xA1\x91\x91\x92\x92\x93\x93\x94\x94\x96\x96\x97\x97\x99\x99\x9A\xA9\x9C\xAA\x9D\xAC\x9E\xAB\x9F\xAF\xA0\x9A\xA1\xBE\xA2\xAE\xA3\xB8\xA4\x9F\xA5\xBD\xA8\xB3\xA9\x98\xAA\xB4\xAB\x9D\xAE\x9C\xAF\xB7\xB2\xB6\xB3\xA6\xB4\xAD\xB7\x9E\xB8\xA3\xB9\xB0\xBA\xA4\xBB\x9B\xBC\xA8\xBD\xB5\xBE\xA5\xBF\xA7\xC0\xE1\xC1\xE2\xC2\xF7\xC3\xE7\xC4\xE4\xC5\xE5\xC6\xF6\xC7\xFA\xC8\xE9\xC9\xEA\xCA\xEB\xCB\xEC\xCC\xED\xCD\xEE\xCE\xEF\xCF\xF0\xD0\xF2\xD1\xF3\xD2\xF4\xD3\xF5\xD4\xE6\xD5\xE8\xD6\xE3\xD7\xFE\xD8\xFB\xD9\xFD\xDA\xFF\xDB\xF9\xDC\xF8\xDD\xFC\xDE\xE0\xDF\xF1\xE0\xC1\xE1\xC2\xE2\xD7\xE3\xC7\xE4\xC4\xE5\xC5\xE6\xD6\xE7\xDA\xE8\xC9\xE9\xCA\xEA\xCB\xEB\xCC\xEC\xCD\xED\xCE\xEE\xCF\xEF\xD0\xF0\xD2\xF1\xD3\xF2\xD4\xF3\xD5\xF4\xC6\xF5\xC8\xF6\xC3\xF7\xDE\xF8\xDB\xF9\xDD\xFA\xDF\xFB\xD9\xFC\xD8\xFD\xDC\xFE\xC0\xFF\xD1"
  set-char-mask "c" "25002502250C251025142518251C2524252C2534253C258025842588258C2590259120182019201C201D22192013201400A9212200a000BB00AE00AB00B700A400a0045204530451045404550456045704580459045A045B045C0491045E045F2116040204030401040404050406040704080409040A040B040C0490040E040F044E0430043104460434043504440433044504380439043A043B043C043D043E043F044F044004410442044304360432044C044B04370448044D04490447044A042E0410041104260414041504240413042504180419041A041B041C041D041E041F042F042004210422042304160412042C042B04170428042D04290427042A"
!elif &seq #l0 "cp1253"
  set-char-mask "M" ""
  set-char-mask "c" "20AC0081201A0192201E20262020202100882030008A2039008C008D008E008F009020182019201C201D20222013201400982122009A203A009C009D009E009F00A00385038600A300A400A500A600A700A800A9000000AB00AC00AD00AE201500B000B100B200B3038400B500B600B703880389038A00BB038C00BD038E038F0390039103920393039403950396039703980399039A039B039C039D039E039F03A003A1000003A303A403A503A603A703A803A903AA03AB03AC03AD03AE03AF03B003B103B203B303B403B503B603B703B803B903BA03BB03BC03BD03BE03BF03C003C103C203C303C403C503C603C703C803C903CA03CB03CC03CD03CE0000"
!elif &seq #l0 "iso8859-7"
  set-char-mask "M" "\x80\xA4\xA2\xB6"
  set-char-mask "c" "0080008100820083008400850086008700880089008A008B008C008D008E008F0090009100920093009400950096009700980099009A009B009C009D009E009F00A02018201900A320AC20AF00A600A700A800A9037A00AB00AC00AD0000201500B000B100B200B303840385038600B703880389038A00BB038C00BD038E038F0390039103920393039403950396039703980399039A039B039C039D039E039F03A003A1000003A303A403A503A603A703A803A903AA03AB03AC03AD03AE03AF03B003B103B203B303B403B503B603B703B803B903BA03BB03BC03BD03BE03BF03C003C103C203C303C403C503C603C703C803C903CA03CB03CC03CD03CE0000"
!elif &seq #l0 "cp1254"
  set-char-mask "M" ""
  set-char-mask "c" "20AC0081201A0192201E20262020202102C62030016020390152008D008E008F009020182019201C201D20222013201402DC21220161203A0153009D009E017800A000A100A200A300A400A500A600A700A800A900AA00AB00AC00AD00AE00AF00B000B100B200B300B400B500B600B700B800B900BA00BB00BC00BD00BE00BF00C000C100C200C300C400C500C600C700C800C900CA00CB00CC00CD00CE00CF011E00D100D200D300D400D500D600D700D800D900DA00DB00DC0130015E00DF00E000E100E200E300E400E500E600E700E800E900EA00EB00EC00ED00EE00EF011F00F100F200F300F400F500F600F700F800F900FA00FB00FC0131015F00FF"
!elif &seq #l0 "iso8859-9"
  set-char-mask "M" ""
  set-char-mask "c" "0080008100820083008400850086008700880089008A008B008C008D008E008F0090009100920093009400950096009700980099009A009B009C009D009E009F00A000A100A200A300A400A500A600A700A800A900AA00AB00AC00AD00AE00AF00B000B100B200B300B400B500B600B700B800B900BA00BB00BC00BD00BE00BF00C000C100C200C300C400C500C600C700C800C900CA00CB00CC00CD00CE00CF011E00D100D200D300D400D500D600D700D800D900DA00DB00DC0130015E00DF00E000E100E200E300E400E500E600E700E800E900EA00EB00EC00ED00EE00EF011F00F100F200F300F400F500F600F700F800F900FA00FB00FC0131015F00FF"
!elif &seq #l0 "cp437"
  set-char-mask "M" "\x83\x9F\x8AS\x8EZ\x9As\x9Ez\x9FY\xA0\xFF\xA1\xAD\xA2\x9B\xA3\x9C\xA5\x9D\xAA\xA6\xAB\xAE\xAC\xAA\xB0\xF8\xB1\xF1\xB2\xFD\xB5\xE6\xB7\xFA\xBA\xA7\xBB\xAF\xBC\xAC\xBD\xAB\xBF\xA8\xC0A\xC1A\xC2A\xC3A\xC4\x8E\xC5\x8F\xC6\x92\xC7\x80\xC8E\xC9\x90\xCAE\xCBE\xCCI\xCDI\xCEI\xCFI\xD1\xA5\xD2O\xD3O\xD4O\xD5O\xD6\x99\xD8O\xD9U\xDAU\xDBU\xDC\x9A\xDDY\xDF\xE1\xE0\x85\xE1\xA0\xE2\x83\xE3a\xE4\x84\xE5\x86\xE6\x91\xE7\x87\xE8\x8A\xE9\x82\xEA\x88\xEB\x89\xEC\x8D\xED\xA1\xEE\x8C\xEF\x8B\xF1\xA4\xF2\x95\xF3\xA2\xF4\x93\xF5o\xF6\x94\xF7\xF6\xF8o\xF9\x97\xFA\xA3\xFB\x96\xFC\x81\xFDy\xFF\x98AAEEIIOOSSUUYYZZoossyyzz"
  set-char-mask "c" "00C700FC00E900E200E400E000E500E700EA00EB00E800EF00EE00EC00C400C500C900E600C600F400F600F200FB00F900FF00D600DC00A200A300A520A7019200E100ED00F300FA00F100D100AA00BA00BF231000AC00BD00BC00A100AB00BB259125922593250225242561256225562555256325512557255D255C255B251025142534252C251C2500253C255E255F255A25542569256625602550256C25672568256425652559255825522553256B256A2518250C25882584258C2590258003B100DF039303C003A303C300B503C403A6039803A903B4221E03C603B52229226100B1226522642320232100F7224800B0221900B7221A207F00B225A000A0"
  set-char-mask "dp" "\CA\CB\CC\CD\CE\CF\CG\CP\CQ\CZ\C[\C^\C_"
  set-variable $box-chars "≥⁄ø¿Ÿ¬√≈¥¡ƒ"
  set-variable $window-chars "=-#*%=\C^± ±\C_\CD==\C^\C^±±  ±±\C_\C_\C[\CZ|\CQ± ±\CP\CD||\CQ\CQ±±  ±±\CP\CP\C[\CZ x* \CP \CQ>\\.$$\\"
  set-variable $system &band $system &bnot 0x10000
  set-variable #l1 0
!elif &seq #l0 "plain-text"
  set-char-mask "M" "¿A¡A¬A√AƒA«C»E…E EÀEÃIÕIŒIœI—N“O”O‘O’O÷O◊xÿOŸU⁄U€U‹U›YﬂB‡a·a‚a‰aÂaÁcËeÈeÍeÎeÏiÌiÓiÔiÒnÚoÛoÙoıoˆo¯o˘u˙u˚u¸u˝y˛bˇy"
!else
  ml-write &spr "[Error: Unknown character set - %s]" #l0
  !abort
!endif
!iif &seq "" &set .change-font.wftp &lget .change-font.cs-wftp &lfind .change-font.cs-id #l0  set-variable .change-font.wftp 0
!if &reg &spr "/history/%s/ext-char-set" %platform "0"
  set-char-mask "dp" "\CA\CB\CY\CM\CL\CN\CK\CX\CU\CO\CV\CW\CR\CP\CQ\C^\C_\CG\C[\C]"
  set-char-mask "p"  "\CC\CD\CE\CF\CH\CI\CJ\CS\CT\CZ"
  set-variable .osd.checkbox-chars "^\CC\CD\CE\CF^"
  set-variable $box-chars "\CY\CM\CL\CN\CK\CX\CU\CO\CV\CW\CR"
  set-variable $window-chars "=-#*%=\C^\C[ \C[\C_*==\C^\C^\C[\C[  \C[\C[\C_\C_**|\CQ\C] \C]\CP*||\CQ\CQ\C]\C]  \C]\C]\CP\CP** \CT\CZ \CP \CQ\t\n\CH\CQ\CP\\"
  set-variable $system &bor $system 0x10000
!else
  set-variable .osd.checkbox-chars "^[ X]^"
  !if #l1
    set-variable $box-chars "|+++++++++-"
    set-variable $window-chars "=-#*%=^   v*==^^      vv**|<   >*||<<      >>** x* > <>\\.$$\\"
    set-variable $system &band $system &bnot 0x10000
  !endif
!endif
