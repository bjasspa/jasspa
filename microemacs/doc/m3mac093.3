.\" -*- nroff -*-
.\" This is part of the JASSPA MicroEmacs documentation files.
.\" Copyright (c) 1999-2009 JASSPA (www.jasspa.com)
.\" See the file "me.nrs" for copying and conditions.
.\"
.\"  Created By    : Jon Green
.\"  Created       : Mon Jul 5 18:16:21 1999
.\"
.Id $Id: m3mac057.3,v 2.12 2023/03/09 21:45:56 jon Exp $
.Im MicroEmacs shell|command
.so me.tni
.TH cvs 3
.XI svn - "\*(mS Subversion interface"
.XI svn-setup - "\*(mS SVN interface setup"
.XI svn-add - "\*(mS SVN interface - add items"
.XI svn-blame - "\*(mS SVN interface - annotate a file"
.XI svn-checkout - "\*(mS SVN interface - checkout a working copy"
.XI svn-commit - "\*(mS SVN interface - commit changes back"
.XI svn-commit-log - "\*(mS SVN interface - get log for a commit"
.XI svn-copy - "\*(mS SVN interface - copy items"
.XI svn-delete - "\*(mS SVN interface - delete items"
.XI svn-diff - "\*(mS SVN interface - diff changes"
.XI svn-ignore - "\*(mS SVN interface - edit directory item ignore list"
.XI svn-info - "\*(mS SVN interface - display info about an item"
.XI svn-log - "\*(mS SVN interface - list log of changes"
.XI svn-move - "\*(mS SVN interface - move an item"
.XI svn-resolve - "\*(mS SVN interface - resolve conflicts"
.XI svn-server-copy - "\*(mS SVN interface - server based copy items"
.XI svn-server-move - "\*(mS SVN interface - server based move items"
.XI svn-status - "\*(mS SVN interface - status of items"
.XI svn-update - "\*(mS SVN interface - update directory files"
.XI svn-xdiff - "\*(mS SVN interface - External diff changes"
.SH NAME
.Me "|svn"
svn \- \*(mS SVN interface
.br
.Me "|svn-setup"
svn-setup \- \*(mS SVN interface setup
.br
.Me "|svn-add"
svn-add \- \*(mS SVN interface - add items
.br
.Me "|svn-blame"
svn-blame \- \*(mS SVN interface - annotate a file
.br
.Me "|svn-checkout"
svn-checkout \- \*(mS SVN interface - checkout a working copy
.br
.Me "|svn-commit"
svn-commit \- \*(mS SVN interface - commit changes back
.br
.Me "|svn-commit-log"
svn-commit-log \- \*(mS SVN interface - get log for a commit
.br
.Me "|svn-copy"
svn-copy \- \*(mS SVN interface - copy items
.br
.Me "|svn-delete"
svn-delete \- \*(mS SVN interface - delete items
.br
.Me "|svn-diff"
svn-diff \- \*(mS SVN interface - diff changes
.br
.Me "|svn-ignore"
svn-ignore \- \*(mS SVN interface - edit directory item ignore list
.br
.Me "|svn-info"
svn-info \- \*(mS SVN interface - display info about an item
.br
.Me "|svn-log"
svn-log \- \*(mS SVN interface - list log of changes
.br
.Me "|svn-move"
svn-move \- \*(mS SVN interface - move an item
.br
.Me "|svn-resolve"
svn-resolve \- \*(mS SVN interface - resolve conflicts
.br
.Me "|svn-server-copy"
svn-server-copy \- \*(mS SVN interface - server based copy items
.br
.Me "|svn-server-move"
svn-server-move \- \*(mS SVN interface - server based move items
.br
.Me "|svn-status"
svn-status \- \*(mS SVN interface - status of items
.br
.Me "|svn-update"
svn-update \- \*(mS SVN interface - update directory files
.br
.Me "|svn-xdiff"
svn-xdiff \- \*(mS SVN interface - external diff changes
.Me $a
.SH SYNOPSIS
.na
.I n
.B svn
.br
.B svn-setup
.sp 1
.B svn-add
.br
.B svn-blame
.br
.B svn-checkout
.br
.B svn-commit
.br
.B svn-commit-log
.br
.B svn-copy
.br
.B svn-delete
.br
.B svn-diff
.br
.B svn-ignore
.br
.B svn-info
.br
.B svn-log
.br
.B svn-move
.br
.B svn-resolve
.br
.B svn-server-copy
.br
.B svn-server-move
.br
.B svn-status
.br
.B svn-update
.br
.B svn-xdiff
.ad
.SH DESCRIPTION
The svn and  sub-commands  provide  \*(mS  with an  interface  to Subversion's
.Hr svn 1 
command.
\fBSubversion\fR is a version control system; using it, you can record the history of
your source file modifications. Subversion is licensed under the Apache Software Foundation and is freely available on
the Internet, see the documentation provided with Subversion for more information on its features and use.
.PP
The \*(mS \fBsvn\fR command opens up a modified
.Ht file-browser 3
with an additional  "\fC*svn-console*\fR"  window. The "\fC*files*\fR"  window includes additional columns showing the
SVN state, revisions and commit author. The browser by default opens with 3 windows including a representation of the
file tree. When \fBsvn\fR is provided with a numeric argument \fIn\fR of zero (0) then a single window  displaying the
directory is used only (i.e. 
.BR "0 svn") 
.PP
The  functionality  of the  file-browser  is the same as a non-SVN folder with the exception that  additional SVN item
controls  are  located in the mouse  context  menu  (opened by clicking  the right mouse  button in the  \fC*files*\fR
buffer). This menu item opens another  sub-menu  providing  access to the items below. When selecting  commands than a
pop-up check-box may be displayed which allows options to be selected for the command.
.IP "\fBCurrent State\fR"
Executes the svn-status command.
.IP "\fBCheckout files\fR"
Executes the svn-checkout command.
.IP "\fBUpdate files\fR"
Executes the svn-update command.
.IP "\fBDiff files\fR"
Executes the svn-diff command.
.IP "\fBCommit files\fR"
Executes the svn-commit command.
.IP "\fBItem Log\fR"
Executes the svn-log command, one item must be selected.
.IP "\fBItem Blame\fR"
Executes the svn-blame command, one file must be selected.
.IP "\fBCopy items\fR"
Executes the svn-copy command, one or more items must be selected.
.IP "\fBMove items\fR"
Executes the svn-move command, one or more items must be selected.
.IP "\fBAdd items\fR"
Executes the svn-add command, one or more items must be selected.
.IP "\fBDelete items\fR"
Executes the svn-delete command, one or more items must be selected.
.IP "\fBResolve conflicts\fR"
Executes the svn-resolve command.
.IP "\fBClear svn console\fR"
Clears the \fI*svn-console*\fR buffer.
.IP "\fBSVN Setup\fR"
Executes the svn-setup command.
.SS Sub-Commands
.PP
The  \fBsvn-add\fR  command adds the current buffer or selected items to the  repository.  Note that this command only
performs the local addition, a \fISVN\fR \fIcommit\fR is required to make the addition permanent.
.PP
The \fBsvn-blame\fR  command opens a \fI*svn-blame*\fR window annotating the revision and author of each line in the current
buffer or single selected file.
.PP
The  \fBsvn-checkout\fR  command checks out a working copy of an item (file or directory)  from a repository  into the
current directory. The user specifies the item via an SVN repository URL.
.PP
The  \fBsvn-commit\fR  command  commits  any  changes  made to the  current  buffer's  file or  selection  list to the
repository. The user is prompted for a commit log message.
.PP
The  \fBsvn-commit-log\fR  command  opens a \fI*svn-commit-log*\fR window displaying the SVN log for the given commit. 
If the output is processed then clicking on or pressing enter on any of the file names listed will execute a 
\fBsvn-diff\fR showing the changes made. 
.PP
The \fBsvn-copy\fR  command creates a local copy of the current buffer's file or selected items;  alternatively a full
SVN repository URL can be given as the destination which will immediately commit the items back to the repository. The
advantage  of using copy over  simply  adding a new item is that the item's  change log history up to the point of the
copy should be maintained by SVN.
.PP
The \fBsvn-delete\fR  command flags the current buffer or selected files for removal from the repository, additionally
the command can remove the local file too - PLEASE NOTE THIS CAN LEAD TO LOST DATA!!! This  command only  performs the
local removal, the  \fBsvn-commit\fR  command must be used to make the deletion permanent. Note that as the local file
is typically removed the file itself cannot be selected when committing the change, use the  \fBsvn-status\fR  command
to list change as this list includes all items flagged for removal.
.PP
The  \fBsvn-diff\fR  command opens a  \fI*svn-diff*\fR  window  displaying the differences  between the current buffer
or selected local files and the repository version.
.PP
The  \fBsvn-ignore\fR  command opens a dialog to edit the list of items contained with the current directory which are
to be ignored by SVN. Currently  selected  items are appended to this list and any changes made are only to the  local
working copy until the changes to the directory are committed  back. Note that this command is obtaining and modifying
the directory's \fCsvn:ignore\fR property.
.PP
The  \fBsvn-info\fR  command opens a  \fI*svn-info*\fR  window displaying the SVN info of the current buffer or single
selected file.
.PP
The \fBsvn-log\fR  command opens a \fI*svn-log*\fR  window displaying the SVN commit log history of the current buffer
or single selected file.
.PP
The  \fBsvn-move\fR  command  moves  (i.e. same as rename  when the  destination  directory  is the same) the  current
buffer's file or selected items, any required changes to the buffer should be saved first and the new file loaded once
moved. Note that unlike copy, SVN does not support a direct local to reposition move. The advantage of using move over
simply deleting and adding a new item is that the item's  change log history will be  maintained.
.PP
The  \fBsvn-resolve\fR  command may be used to resolve conflicts caused by SVN updating the local working copy.
.PP
The \fBsvn-server-copy\fR  command performs a repository based copy of the current buffer's file or selected item, to a
new  location  in the  repository.  In SVN this is the easiest way to create a  development  branch or a release,  for
example   to  create  the   \*(mS   2022   release   one  could   server   copy   \fC<svn-rep>/trunk/MicroEmacs\fR   to
\fC<svn-rep>/releases/MicroEmacs-2022\fR.  As the copy is performed on the server it is  immediately  committed so the
command prompts for a commit log comment.
.PP
Similar to \fBsvn-server-copy\fR,  the  \fBsvn-server-move\fR  command performs a repository based move of the current
buffer's file or selected item.
.PP
The \fBsvn-status\fR  command opens a \fI*svn-state*\fR window and shows the state of all the items within the current
directory,  including the modification state, and optionally whether items are out-of-date (i.e. have been modified in
the repository).
.PP
The  \fBsvn-update\fR  command  updates  all files in the  current  directory,  the  output  being  reported  to a new
\fI*svn-update*\fR  window. Note that unlike most svn sub commands this command executes over all files in the current
buffer's file directory.
.PP
The  \fBsvn-xdiff\fR  command launches an external diff application to display  differences, the command be configured
first by setting the \fB%svn-xdiff-com\fR to an appropriate command-line, e.g. '\fCMeld -n %f\fR'. See
.Ht %xdiff-com 5
for more information.
.SS Setup
.B svn-setup
provides a dialog interface to configure the \*(mS SVN interface if required. On a typical system installation then it
is sufficient to have the \fBsvn\fR program in the \fB$PATH\fR and the SVN tools will operate from a working copy of a
repository.
.PP
.B svn-setup
may also be accessed from 
.Ht user-setup 3 
from  the  \fBMiscellaneous\fR  configuration.  The the  dialog  provides  the
following configuration controls:
.PP
\fBSVN Command Setup\fR
.RS
.IP "\fCSVN Command\fR"
Sets the svn command-line program name, this can be an absolute path.
.IP "\fCGlobal opts\fR"
Sets  command-line  arguments which are to be always given to the svn command, the default of  \fC--non-interactive\fR
informs SVN that the program is being run in the background so cannot interact with the user.
rsh.
.IP "\fCDef Rep URL\fR"
Defines the default SVN repository URL, this is only used when using the \fBsvn-checkout\fR command.
.IP "\fCEnable Support on Start-Up\fR"
When  enabled  the svn  support  macros are loaded on start-up  enabling  the  file-browser  to detect SVN  controlled
directories.
.IP "\fCQuick browser mode\fR"
When  enabled the SVN file  browser does not include the '\fC-u\fR'  option when launching the svn status command
to get the current state of all files in the  directory,  this means SVN does not need to go to the repository  server
to get the update  information. This can make a big improvement to performance,  particularly if the connection to the
server is slow. In Quick mode the status of locally  unmodified  files is set to '\fCQ\fR'  indicating  the repository
state of the file has not been ascertained. The full SVN  information  can be  obtained by  executing  the
command \fBsvn-full-reread\fR, typically bound to \fCC-f5\fR.
.IP "\fCTools\fR"
In this tab each sub-command can be selected a their default option settings changed as required.
.RE
.SH NOTES
\fBsvn\fR and sub-commands are macros defined in file \fCsvn.emf\fR.
.PP
When  filtering is enabled in the file browser the filter used by the SVN interface  depends on the file browser mode,
if \fBQuick browser mode\fR is enabled the same filter is used, but when disabled all files ignored by
.Hr svn 1
are also removed by the filter. Use
.Ht buffer-setup 3
in the buffer to enable/disable the filter.
.SH "SEE ALSO"
.na
.Ht ClearCase 3 ,
.Ht file-browser 3 .
.ad
.FH
