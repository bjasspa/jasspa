.\" -*- nroff -*-
.\" This is part of the JASSPA MicroEmacs documentation files.
.\" Copyright (c) 1998-2009 JASSPA (www.jasspa.com)
.\" See the file "me.nrs" for copying and conditions.
.\"
.Id $Id: m5var044.5,v 2.6 2009/08/29 17:14:15 jon Exp $
.Im MicroEmacs variable|scuts
.so me.tni
.TH %tag-file 5
.XI %tag-file - "Tag file name"
.XI %tag-template - "Tag file search string"
.XI %tag-option - "Tag file search option"
.SH NAME
.Me "|%tag-file"
%tag-file \- Tags file name
.br
.Me "|%tag-template"
%tag-template \- Tag file search string
.br
.Me "|%tag-option"
%tag-option \- Tag file search option
.Me $a
.SH SYNOPSIS
\fB%tag-file\fR "\fIfileName\fR" 
.br
\fB%tag-template\fR "\fIstring\fR"
.br
\fB%tag-option\fR "\fIstring\fR" 
.SH DESCRIPTION
The \fB%tag-file\fR and \fB%tag-template\fR variables must be defined  for
.Ht find-tag 2
to work, they define the information required to locate tag references.
.PP
.B %tag-file
is the
name of the  tag file to  be used, usually  set to "\fBtags\fR".
.B %tag-template
is a regular  expression  search  string used to identify  tags in a tag file.
For example, a tag usually  consists of a name  "\fC%[^\\t]\fR"  followed by a
tab  "\fC\\t\fR"  followed  by  the  file  name  that  contains  the  function
"\fC%[^\\t]\fR" followed by another tab, followed by the search string and end
of line "\fC%[^\\n]\\n\fR", i.e.
.Me $emf-scheme
.CS
set-variable %tag-template  "%[^\\t]\\t%[^\\t]\\t%[^\\n]\\n"
.CE
.Me $ehf-scheme
This would match a 
.Hr vi 1 
tag string definition, as created by the \s-1UNIX\s0 utility 
.Hr ctags 1 .
The tags file typically contains entries such as:-
.CS
$auto-time    m5var000.5 /^.XI $auto-time - "Automatic buffer"$/
$buffer-bhook m5var002.5 /^.XI $buffer-bhook - "Buffer macro"$/
$buffer-ehook m5var002.5 /^.XI $buffer-ehook - "Buffer macro"$/
.CE
The \fBtag-template\fR definition is modified to match the output of the 
.Hr ctags 1 
utility.  The format of the tags file may differ  from  platform to  platform,
typically the  differences are encountered in the line contents field which is
usually  defined  as \fC/\  ....\ /\fR for a forward search tag and
\fC?\  ....\ ?\fR for a reverse  search tag. Note that a tag's  search  string
typically  starts with the character  '\fC^\fR' and ends with '\fC$\fR'  which
indicate the start and end of the line.
The  variable  fields  are  expected  to be in  conventional  order  of
\fIlabel\fR, \fIfilename\fR and \fIlineText\fR.
.PP
.B %tag-option
is a user defined variable that modifies the behavior of 
.Ht find-tag 2 .
This is defined as a string, where each  character  identifies an option, when
undefined then default  behavior is assumed.  The options are defined as:-
.IP "\fBm\fR \- Enable multiple tags support"
Allows a single tag to be present  multiple  times in the tag file,  typically
used when a function is defined  multiple  times. When enabled  \fBfind-tag\fR
can be used to loop through all definitions of a given tag. 
.IP "\fBr\fR \- recursive tags file"
By default, the \fBtags\fR file is assumed to reside in the current  directory
location.  The \fBr\fR  option  enables an ascending  search up the  directory
hierarchy  from the  current  directory  position  in search of a  recursively
generated tags file.
.IP "\fBc\fR \- Continue recursive tag search"
Used in  conjunction  with flag  \fBr\fR; when not  specified,  the  recursive
searching  of a tag stops at the first tag file found,  regardless  of whether
the given tag was located in the found tag file. If this flag is given and the
tag was not found in the first tag file, the recursive search  continues. This
allows local tag files to be created and regularly maintained, yet still being
able to access a higher level tag file when required.
.LP
Modifications  to this  variable  should be made in the  \fIuser\fR.emf  file,
e.g. To enable multi recursive ascent tag searching define:-
.Me $emf-scheme
.CS
set-variable %tag-option  "mrc"
.CE 0
.Me $ehf-scheme
.SH NOTES
Note that GNU Emacs uses it's own tag file format generated by 
.Hr etags 1 
which does not contain the appropriate information to drive the \*(mE
.B find-tag 
command.
.PP
The above settings should support the extended version 2 tag file format which
has an extra tag type field at the end of each line.
.SH "SEE ALSO"
.na
.Hr ctags 1 ,
.Ht ctags 3f ,
.Ht find-tag 2 ,
.Hr vi 1 .
.ad
.FH
