.\" -*- nroff -*-
.\" Copyright (C) 1999-2025 JASSPA (www.jasspa.com)
.\"
.\" This is part of JASSPA's MicroEmacs, see the LICENSE file for licensing and
.\" copying information.
.\"
.\"  Created By    : Detlef Groth
.\"  Created       : 2025-07-24
.\"
.Id $Id: m9typ058.9,v 2.6 2025/08/22 08:24:11 jon Exp $
.Im MicroEmacs filetype
.so me.tni
.TH m 9
.XI m - "GNU Octave / Matlab File"
.XI octave - "GNU Octave / Matlab File"
.XI matlab - "GNU Octave / Matlab File"
.SH SYNOPSIS
m \- GNU Octave / Matlab files
.SH FILES
.na
.B hkoctave.emf
\- Octave hook definition
.br
.B octave.eaf
\- Octave abbreviation file
.br
.B octave.etf
\- Octave template file.
.ad
.SH EXTENSIONS
.na
\fB.m\fR \- GNU Octave / Matlab file
.ad
.SH DESCRIPTION
The  \fBOctave\fR  file  type  editing  provides  simple   hilighting  of  GNU
Octave / Matlab files, abbreviations, folding and an item-list.
.IP "\fBAbbreviations\fR"
The  installation  comes with a default  abbreviation  file for Octave file  editing
which  can  be  used  by  writing   short   abbreviations   like   "\fBif\fR",
"\fBel\fR" (else) or "\fBfu\fR" (function) - and then pressing the key-binding for the 
.Ht expand-abbrev-handle 3
command.  
The  list  of  abbreviations  can be used  interactively  in the GUI
version of \*(mE using the 
.Ht abbrev-list 3
command.
.IP "\fBFolding and Information Hiding\fR"
Generic  folding  is  enabled  within  the Octave  file. The folds  occur  about
function declarations as long as these are at the beginning 
of the line and ending at a line starting with the \fBendfunction\fR keyword.
.Ht collapse-all 3
(un)folds all regions in the file,
.Ht collapse-current 3
(un)folds the current region.
.IP "\fBNavigation via Item List\fR"
The Octave mode offers beside folding as well support for displaying an outline of the
functions for easy navigation using the 
.Ht item-list 3
command.
.IP "\fBShort Cuts\fR"
The short cut keys used within the buffer are:-
.IP
\fB\*cc \*cc\fR \- Comment out the current line.
.br
\fB\*cc \*cd\fR \- Uncomment the current line.
.br
\fB\*cc \*ce\fR \- Comment to the end of the line with comment symbols (#).
.br
\fB\*a\*ci\fR \- Restyle the current region.
.br
\fB\*eq\fR \- Format a comment.
.br
\fB\*eo\fR \- Format a comment.
.br
\fBf2\fR \- (Un)fold the current region.
.br
\fB\*cf2\fR \- (Un)fold all regions.
.br
\fBf6\fR \- List items.
.br
\fB\*ef6\fR \- Close item list,
.IP "\fBExecuting, Formatting and Linting Octave Code\fR"
The Octave file hook supports the 
.Ht file-exec 3 ,
the 
.Ht file-format 3
and the 
.Ht file-lint 3
macros.   For  formatting  and linting the \fIoctave\fR  interpreter  itself is used
using the \fI"-W"\fR option for running the  terminal  version. As Octave does
not support  mentioning the filename in case of errors,  currently there is no
support to click on the error  messages for and jump to the  problematic  code
\fBfile-exec\fR. 
For  linting a trick is used catching the error message for the current Octave
file. For formatting  the code the Python tool \fI"matlab-formatter"\fR can be
used.
This tool can be installed on an Unix system like this:
.RS
.CS
## Download the script into ~/.local/bin
curl -fsSL -o ~/.local/bin/matlab-formatter \\
  https://raw.githubusercontent.com/mittelmark/matlab-formatter-vscode/refs/heads/master/formatter/matlab_formatter.py

### Make the script executable
chmod +x ~/.local/bin/matlab-formatter

#### Verify the installation
matlab-formatter
.CE 0
.RE
.SH NOTES
.PP
The  hilighting  is  typically   extended  using  a  file   \fBmym.emf\fR.
.SH BUGS
Currenlty the next-line feature for interactive browsing of errors and warning
for  file-lint and file-exec  does not work due to Octave limits on mentioning
the filename for errors. 
.SH "SEE ALSO"
.na
.Ht abbrev-list 3 ,
.Ht collapse-all 3 ,
.Ht collapse-current 3 ,
.Ht expand-abbrev-handle 3 ,
.Ht file-exec 3 ,
.Ht file-format 3 ,
.Ht file-lint 3 ,
.Ht item-list 3 ,
.Ht restyle-buffer 3 ,
.Ht restyle-region 3 ,
.Ht time 2m .
.sp 1
.Hl "Supported File Types" FileTypes -
.ad
.FH
