.\" -*- nroff -*-
.\" This is part of the JASSPA MicroEmacs documentation files.
.\" Copyright (c) 1998-2009 JASSPA (www.jasspa.com)
.\" See the file "me.nrs" for copying and conditions.
.\"
.Id $Id: m5var038.5,v 2.6 2009-08-29 17:14:15 jon Exp $
.Im MicroEmacs variable|hilight
.so me.tni
.TH $mouse-pos 5 
.XI $mouse-pos - "Mouse position information"
.SH NAME
$mouse-pos \- Mouse position information
.Me $a
.SH SYNOPSIS
\fB$mouse-pos\fR \fIinteger\fR
.SH DESCRIPTION
.B $mouse-pos
is generated by invocation of the command
.Ht set-cursor-to-mouse 2 .
The variable is set to a value that indicates the position of the mouse within
a window. The values to the mouse intersection are interpreted as follows:-
.IP "\fB0 \- Text area\fR"
Intersection with the window text area.
.IP "\fB1 \- Message Line\fR"
Intersection with the message line.
.IP "\fB2 \- Mode Line\fR"
Intersection with the mode line.
.IP "\fB3 \- Horizontal Separator\fR"
Intersection with the horizontal window separator. This value is only set if a
scroll bar is not present.
.IP "\fB4 \- Up Arrow\fR"
Intersection with the scroll bar up-arrow character.
.IP "\fB5 \- Upper Shaft\fR"
Intersection with the scroll bar upper shaft (above the scroll box).
.IP "\fB6 \- Scroll Box\fR"
Intersection with the scroll bar scroll box.
.IP "\fB7 \- Lower Shaft\fR"
Intersection with the scroll bar lower shaft (below the scroll box).
.IP "\fB8 \- Down Arrow\fR"
Intersection with the scroll bar down-arrow character.
.IP "\fB9 \- Corner\fR"
Intersection with the window corner, that is the character at the intersection
of the scroll bar (or separator) and the mode line.
.IP "\fB10 \- Menu Line\fR"
Intersection with the menu line.
.IP "\fB255 \- Error\fR"
The  position  of the mouse  could not be  determined.  This value  should not
arise,  if it does  then it is an  indication  that the  window  structure  is
probably corrupted. A
.Ht delete-other-windows 2 
is suggested or rapid exit from the editor after a
.Ht save-some-buffers 2 
command to save any edits (latter option is preferred).
.IP "\fBBit 4 - 2nd Column\fR"
Bit 4 (16)  is  set  if 2  character  column  scroll  bar or  vertical  window
separator is in effect and the cursor  exists in the second  column This value
is bitwise OR'ed with the aforementioned intersection values.
.SH EXAMPLE
The  following  macro  can be used to print out the  current  position  of the
mouse, try binding the macro to the "\fCmouse-move\fR" key:
.Me $emf-scheme
.CS
define-macro print-mouse-position
    !force set-cursor-to-mouse
    set-variable #l0 &band $mouse-pos 15
    !if &equ #l0 0
        ml-write "Mouse in text window"
    !elif &equ #l0 1
        ml-write "Mouse on message line"
    !elif &equ #l0 2
        ml-write "Mouse on Mode line"
    !elif &and &gre #l0 2 &les #l0 10
        ml-write "Mouse on scroll bar"
    !elif &equ #l0 10
        ml-write "Mouse on corner"
    !elif &equ #l0 11
        ml-write "Mouse on menu line"
    !endif
!emacro

global-bind-key print-mouse-position mouse-move
.CE
.Me $ehf-scheme
.B $mouse-pos 
is utilized by the mouse  picking code, found in macro file  \fCmouse.emf\fR.
.SH "SEE ALSO"
.na
.Ht $mouse-x 5 ,
.Ht $mouse-y 5 ,
.Ht set-cursor-to-mouse 2 ,
.Ht set-scroll-with-mouse 2 .
.ad
.FH
