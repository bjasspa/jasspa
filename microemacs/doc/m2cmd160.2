.\" -*- nroff -*-
.\" This is part of the JASSPA MicroEmacs documentation files.
.\" Copyright (c) 1998-2002 JASSPA (www.jasspa.com)
.\" See the file "me.nrs" for copying and conditions.
.\"
.Id $Id: m2cmd160.2,v 2.4 2002-01-11 21:58:42 jon Exp $
.Im MicroEmacs command|macrodevelop
.so me.tni
.TH command-wait 2
.XI command-wait - "Conditional wait command"
.SH NAME
command-wait \- Conditional wait command
.Me $a
.SH SYNOPSIS
.na
.I n
.B command-wait
.ad
.SH DESCRIPTION
When a +ve  argument  \fIn\fR is given  \fBcommand-wait\fR  waits for  \fIn\fR
milliseconds  before  returning,  this wait  cannot be  interrupted.  If a -ve
argument is given, \fBcommand-wait\fR waits for \-\fIn\fR milliseconds but the
command  will  return if the user  interrupts  with any input  activity  (i.e.
presses a key).
.PP
When no  argument is given  \fBcommand-wait\fR  loops  getting and  processing
events  (user input,  screen  updates etc) until  either the calling  commands
\fB.wait\fR command variable is undefined or set to false (\fC0\fR). This more
complex  use of the  command  is used when a main macro must wait and  process
input  until an exit  criteria  has been met, the input is best  processed  by
setting the
.Ht $buffer-input 5
variable to a second macro. The macro
.Ht gdiff 3
uses this command in this way.
.SH EXAMPLE
The  following  macro code will  display a message on the screen for a fixed 5
seconds:
.Me $emf-scheme
.CS
16 screen-poke 10 10 0 "Hello World!"
5000 command-wait
.CE
.Me $ehf-scheme
Similarly the following  macro code will display a message for up to 5 seconds
or till the user presses a key:
.Me $emf-scheme
.CS
16 screen-poke 10 10 0 "Hello World!"
-5000 command-wait
.CE 0
.Me $ehf-scheme
.SH "SEE ALSO"
.na
.Ht ml-write 2 ,
.Ht $buffer-input 5 .
.ad
.FH
